<!DOCTYPE html>
<html lang="">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link rel="icon" href="favicon.svg">
  <title>
    <%= htmlWebpackPlugin.options.title %>
  </title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Krona+One&display=swap" rel="stylesheet">
  <link href="//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css" rel="stylesheet" type="text/css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300&display=swap" rel="stylesheet">
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <meta name="google-signin-client_id"
    content="1020232962087-9okarfqqq1mdum5q113liqkb28udsq9d.apps.googleusercontent.com" />
  <script src="https://apis.google.com/js/platform.js?onload=init" async defer></script>
  <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
  <!-- 카카오 로그인하려고 js sdk삽입 -->
  <script language="javascript">
    // 윈도우 창을 닫을 때 로그아웃 처리
    function closePage(event) {
      if (event.clientY < 0) {
        // 로그아웃 처리
        this.$store.commit('initUser');
        this.$store.commit('logout');
        if (this.$store.state.auth.providerType == 'GOOGLE') {
          const authInst = window.gapi.auth2.getAuthInstance();
          authInst.signOut();
        } else if (this.$store.state.auth.providerType == 'KAKAO') {
          window.Kakao.API.request({
            url: '/v1/user/unlink',
          });
        }
      }
    }
    document.onkeydown = function () {
      // 창 닫기( Alt+F4 ) 방지 
      if (event.keyCode == 115) { // F4 눌렀을 시
        // 로그아웃 처리
        this.$store.commit('initUser');
        this.$store.commit('logout');
        if (this.$store.state.auth.providerType == 'GOOGLE') {
          const authInst = window.gapi.auth2.getAuthInstance();
          authInst.signOut();
        } else if (this.$store.state.auth.providerType == 'KAKAO') {
          window.Kakao.API.request({
            url: '/v1/user/unlink',
          });
        }
      }

      // 윈도우 창이 닫힐 경우
      if (event.keyCode == 505) {
        this.$store.commit('initUser');
        this.$store.commit('logout');
        if (this.$store.state.auth.providerType == 'GOOGLE') {
          const authInst = window.gapi.auth2.getAuthInstance();
          authInst.signOut();
        } else if (this.$store.state.auth.providerType == 'KAKAO') {
          window.Kakao.API.request({
            url: '/v1/user/unlink',
          });
        }
        alert(document.body.onBeforeUnload);
      }
    }
  </script>
  
  <BODY onbeforeunload="closePage(event)" oncontextmenu="return false">

</head>

<body>
  <noscript>
    <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled.
        Please enable it to continue.</strong>
  </noscript>
  <div id="app"></div>
  <!-- built files will be auto injected -->
</body>

</html>